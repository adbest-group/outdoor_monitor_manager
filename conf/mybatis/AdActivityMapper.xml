<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.bt.om.mapper.AdActivityMapper" >
  <resultMap id="BaseResultMap" type="com.bt.om.entity.AdActivity" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jan 18 14:25:00 CST 2018.
    -->
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="activity_name" property="activityName" jdbcType="VARCHAR" />
    <result column="start_time" property="startTime" jdbcType="TIMESTAMP" />
    <result column="end_time" property="endTime" jdbcType="TIMESTAMP" />
    <result column="status" property="status" jdbcType="INTEGER" />
    <result column="user_id" property="userId" jdbcType="INTEGER" />
	<result column="customer_type_id" property="customerTypeId" jdbcType="INTEGER" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
    <result column="assessor_id" property="assessorId" jdbcType="INTEGER" />
    <result column="sample_pic_url" property="samplePicUrl" jdbcType="VARCHAR" />
    <result column="up_task_time" property="upTaskTime" jdbcType="VARCHAR" />
    <result column="up_monitor_task_time" property="upMonitorTaskTime" jdbcType="VARCHAR" />
    <result column="duration_monitor_task_time" property="durationMonitorTaskTime" jdbcType="VARCHAR" />
    <result column="down_monitor_task_time" property="downMonitorTaskTime" jdbcType="VARCHAR" />
    <result column="zhuijia_monitor_task_time" property="zhuijiaMonitorTaskTime" jdbcType="VARCHAR" />
    <result column="up_task_point" property="upTaskPoint" jdbcType="INTEGER" />
    <result column="up_monitor_task_point" property="upMonitorTaskPoint" jdbcType="INTEGER" />
    <result column="duration_monitor_task_point" property="durationMonitorTaskPoint" jdbcType="INTEGER" />
    <result column="down_monitor_task_point" property="downMonitorTaskPoint" jdbcType="INTEGER" />
    <result column="zhuijia_monitor_task_point" property="zhuijiaMonitorTaskPoint" jdbcType="INTEGER" />
    <result column="up_task_money" property="upTaskMoney" jdbcType="DOUBLE" />
    <result column="up_monitor_task_money" property="upMonitorTaskMoney" jdbcType="DOUBLE" />
    <result column="duration_monitor_task_money" property="durationMonitorTaskMoney" jdbcType="DOUBLE" />
    <result column="down_monitor_task_money" property="downMonitorTaskMoney" jdbcType="DOUBLE" />
    <result column="zhuijia_monitor_task_money" property="zhuijiaMonitorTaskMoney" jdbcType="DOUBLE" />
    <result column="qualified_pic_url" property="qualifiedPicUrl" jdbcType="VARCHAR" />
    <result column="no_qualified_pic_url1" property="noQualifiedPicUrl1" jdbcType="VARCHAR" />
    <result column="no_qualified_pic_url2" property="noQualifiedPicUrl2" jdbcType="VARCHAR" />
    <result column="no_qualified_pic_url3" property="noQualifiedPicUrl3" jdbcType="VARCHAR" />
    <result column="no_qualified_text1" property="noQualifiedText1" jdbcType="VARCHAR" />
    <result column="no_qualified_text2" property="noQualifiedText2" jdbcType="VARCHAR" />
    <result column="no_qualified_text3" property="noQualifiedText3" jdbcType="VARCHAR" />
    <result column="notification" property="notification" jdbcType="VARCHAR"/>
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jan 18 14:25:00 CST 2018.
    -->
    id, activity_name, start_time, end_time, status, user_id, customer_type_id, create_time, update_time, assessor_id, sample_pic_url,
    up_task_time, up_monitor_task_time, duration_monitor_task_time, down_monitor_task_time, zhuijia_monitor_task_time,up_task_point,
    up_monitor_task_point,duration_monitor_task_point,down_monitor_task_point,zhuijia_monitor_task_point,up_task_money,up_monitor_task_money,duration_monitor_task_money,
    down_monitor_task_money,zhuijia_monitor_task_money,qualified_pic_url,no_qualified_pic_url1,no_qualified_pic_url2,no_qualified_pic_url3,no_qualified_text1,no_qualified_text2,
    no_qualified_text3,notification
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jan 18 14:25:00 CST 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    from ad_activity
    where id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jan 18 14:25:00 CST 2018.
    -->
    delete from ad_activity
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.bt.om.entity.AdActivity" useGeneratedKeys="true" keyProperty="id">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jan 18 14:25:00 CST 2018.
    -->
    insert into ad_activity (id, activity_name, start_time, 
      end_time, status, user_id, customer_type_id,
      create_time, update_time, assessor_id,sample_pic_url,
      up_task_time, up_monitor_task_time, duration_monitor_task_time, down_monitor_task_time, zhuijia_monitor_task_time,
      up_task_point,up_monitor_task_point,duration_monitor_task_point,down_monitor_task_point,zhuijia_monitor_task_point,up_task_money,
      up_monitor_task_money,duration_monitor_task_money,down_monitor_task_money,zhuijia_monitor_task_money,qualified_pic_url,
      no_qualified_pic_url1,no_qualified_pic_url2,no_qualified_pic_url3,no_qualified_text1,no_qualified_text2,no_qualified_text3,notification
      )
    values (#{id,jdbcType=INTEGER}, #{activityName,jdbcType=VARCHAR}, #{startTime,jdbcType=TIMESTAMP}, 
      #{endTime,jdbcType=TIMESTAMP}, #{status,jdbcType=INTEGER}, #{userId,jdbcType=INTEGER}, #{customerTypeId,jdbcType=INTEGER},
      #{createTime,jdbcType=TIMESTAMP}, #{updateTime,jdbcType=TIMESTAMP}, #{assessorId,jdbcType=INTEGER}, #{samplePicUrl,jdbcType=VARCHAR},
      #{upTaskTime,jdbcType=VARCHAR}, #{upMonitorTaskTime,jdbcType=VARCHAR}, #{durationMonitorTaskTime,jdbcType=VARCHAR}, #{downMonitorTaskTime,jdbcType=VARCHAR}, 
      #{zhuijiaMonitorTaskTime,jdbcType=VARCHAR}, #{upTaskPoint,jdbcType=INTEGER}, #{upMonitorTaskPoint,jdbcType=INTEGER},#{durationMonitorTaskPoint,jdbcType=INTEGER}, 
      #{downMonitorTaskPoint,jdbcType=INTEGER},#{zhuijiaMonitorTaskPoint,jdbcType=INTEGER},#{upTaskMoney,jdbcType=INTEGER}, #{upMonitorTaskMoney,jdbcType=INTEGER},
      #{durationMonitorTaskMoney,jdbcType=INTEGER}, #{downMonitorTaskMoney,jdbcType=INTEGER} , #{zhuijiaMonitorTaskMoney,jdbcType=DOUBLE} , #{qualifiedPicUrl,jdbcType=VARCHAR},
      #{noQualifiedPicUrl1,jdbcType=VARCHAR},#{noQualifiedPicUrl2,jdbcType=VARCHAR},#{noQualifiedPicUrl3,jdbcType=VARCHAR},#{noQualifiedText1,jdbcType=VARCHAR},#{noQualifiedText2,jdbcType=VARCHAR},
      #{noQualifiedText3,jdbcType=VARCHAR},#{notification,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.bt.om.entity.AdActivity" useGeneratedKeys="true" keyProperty="id" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jan 18 14:25:00 CST 2018.
    -->
    insert into ad_activity
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="activityName != null" >
        activity_name,
      </if>
      <if test="startTime != null" >
        start_time,
      </if>
      <if test="endTime != null" >
        end_time,
      </if>
      <if test="status != null" >
        status,
      </if>
      <if test="userId != null" >
        user_id,
      </if>
	  <if test="customerTypeId != null" >
        customer_type_id,
      </if>
      <if test="createTime != null" >
        create_time,
      </if>
      <if test="updateTime != null" >
        update_time,
      </if>
       <if test="assessorId != null" >
        assessor_id,
      </if>
      <if test="samplePicUrl != null" >
        sample_pic_url,
      </if>
      <if test="upTaskTime != null" >
        up_task_time,
      </if>
      <if test="upMonitorTaskTime != null" >
        up_monitor_task_time,
      </if>
      <if test="durationMonitorTaskTime != null" >
        duration_monitor_task_time,
      </if>
      <if test="downMonitorTaskTime != null" >
        down_monitor_task_time,
      </if>
      <if test="zhuijiaMonitorTaskTime != null" >
        zhuijia_monitor_task_time,
      </if>
      <if test="upTaskPoint != null" >
        up_task_point,
      </if>     
      <if test="upMonitorTaskPoint != null" >
        up_monitor_task_point,
      </if>
      <if test="durationMonitorTaskPoint != null" >
        duration_monitor_task_point,
      </if>
      <if test="downMonitorTaskPoint != null" >
        down_monitor_task_point,
      </if>
      <if test="zhuijiaMonitorTaskPoint != null" >
        zhuijia_monitor_task_point,
      </if>
      <if test="upTaskMoney != null" >
        up_task_money,
      </if>     
      <if test="upMonitorTaskMoney != null" >
        up_monitor_task_money,
      </if>
      <if test="durationMonitorTaskMoney != null" >
        duration_monitor_task_money,
      </if>
      <if test="downMonitorTaskMoney != null" >
        down_monitor_task_money,
      </if>
       <if test="zhuijiaMonitorTaskMoney != null" >
        zhuijia_monitor_task_money,
      </if>
      <if test="qualifiedPicUrl != null">
      	qualified_pic_url,
      </if>
      <if test="noQualifiedPicUrl1 != null">
      	no_qualified_pic_url1,
      </if>
      <if test="noQualifiedPicUrl2 != null">
      	no_qualified_pic_url2,
      </if>
      <if test="noQualifiedPicUrl3 != null">
      	no_qualified_pic_url3,
      </if>
      <if test="noQualifiedText1 != null">
      	no_qualified_text1,
      </if>
      <if test="noQualifiedText2 != null">
      	no_qualified_text2,
      </if>
      <if test="noQualifiedText3 != null">
      	no_qualified_text3,
      </if>
      <if test="notification != null">
      	notification
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="activityName != null" >
        #{activityName,jdbcType=VARCHAR},
      </if>
      <if test="startTime != null" >
        #{startTime,jdbcType=TIMESTAMP},
      </if>
      <if test="endTime != null" >
        #{endTime,jdbcType=TIMESTAMP},
      </if>
      <if test="status != null" >
        #{status,jdbcType=INTEGER},
      </if>
      <if test="userId != null" >
        #{userId,jdbcType=INTEGER},
      </if>
	  <if test="customerTypeId != null" >
        #{customerTypeId,jdbcType=INTEGER},
      </if>
      <if test="createTime != null" >
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null" >
        #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="assessorId != null" >
        #{assessorId,jdbcType=INTEGER},
      </if>
      <if test="samplePicUrl != null" >
        #{samplePicUrl,jdbcType=VARCHAR},
      </if>
      <if test="upTaskTime != null" >
        #{upTaskTime,jdbcType=VARCHAR},
      </if>
      <if test="upMonitorTaskTime != null" >
        #{upMonitorTaskTime,jdbcType=VARCHAR},
      </if>
      <if test="durationMonitorTaskTime != null" >
        #{durationMonitorTaskTime,jdbcType=VARCHAR},
      </if>
      <if test="downMonitorTaskTime != null" >
        #{downMonitorTaskTime,jdbcType=VARCHAR},
      </if>
      <if test="zhuijiaMonitorTaskTime != null" >
        #{zhuijiaMonitorTaskTime,jdbcType=VARCHAR},
      </if>
      <if test="upTaskPoint != null" >
        #{upTaskPoint,jdbcType=INTEGER},
      </if>
      <if test="upMonitorTaskPoint != null" >
        #{upMonitorTaskPoint,jdbcType=INTEGER},
      </if>
      <if test="durationMonitorTaskPoint != null" >
        #{durationMonitorTaskPoint,jdbcType=INTEGER},
      </if>
      <if test="downMonitorTaskPoint != null" >
        #{downMonitorTaskPoint,jdbcType=INTEGER},
      </if>
       <if test="zhuijiaMonitorTaskPoint != null" >
        #{zhuijiaMonitorTaskPoint,jdbcType=INTEGER},
      </if>
      <if test="upTaskMoney != null" >
        #{upTaskMoney,jdbcType=DOUBLE},
      </if>
      <if test="upMonitorTaskMoney != null" >
        #{upMonitorTaskMoney,jdbcType=DOUBLE},
      </if>
      <if test="durationMonitorTaskMoney != null" >
        #{durationMonitorTaskMoney,jdbcType=DOUBLE},
      </if>
      <if test="downMonitorTaskMoney != null" >
        #{downMonitorTaskMoney,jdbcType=DOUBLE},
      </if>
      <if test="zhuijiaMonitorTaskMoney != null" >
        #{zhuijiaMonitorTaskMoney,jdbcType=DOUBLE},
      </if>
      <if test="qualifiedPicUrl != null" >
        #{qualifiedPicUrl,jdbcType=VARCHAR},
      </if>
      <if test="noQualifiedPicUrl1 != null" >
        #{noQualifiedPicUrl1,jdbcType=VARCHAR},
      </if>
      <if test="noQualifiedPicUrl2 != null" >
        #{noQualifiedPicUrl2,jdbcType=VARCHAR},
      </if>
      <if test="noQualifiedPicUrl3 != null" >
        #{noQualifiedPicUrl3,jdbcType=VARCHAR},
      </if>
         <if test="noQualifiedText1 != null" >
        #{noQualifiedText1,jdbcType=VARCHAR},
      </if>
      <if test="noQualifiedText2 != null" >
        #{noQualifiedText2,jdbcType=VARCHAR},
      </if>
      <if test="noQualifiedText3 != null" >
        #{noQualifiedText3,jdbcType=VARCHAR},
      </if>
       <if test="notification != null" >
        #{notification,jdbcType=VARCHAR}
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.bt.om.entity.AdActivity" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jan 18 14:25:00 CST 2018.
    -->
    update ad_activity
    <set >
      <if test="activityName != null" >
        activity_name = #{activityName,jdbcType=VARCHAR},
      </if>
      <if test="startTime != null" >
        start_time = #{startTime,jdbcType=TIMESTAMP},
      </if>
      <if test="endTime != null" >
        end_time = #{endTime,jdbcType=TIMESTAMP},
      </if>
      <if test="status != null" >
        status = #{status,jdbcType=INTEGER},
      </if>
      <if test="userId != null" >
        user_id = #{userId,jdbcType=INTEGER},
      </if>
	  <if test="customerTypeId != null" >
        customer_type_id = #{customerTypeId,jdbcType=INTEGER},
      </if>
      <if test="createTime != null" >
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null" >
        update_time = #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="assessorId != null" >
        assessor_id = #{assessorId,jdbcType=INTEGER},
      </if>
      <if test="samplePicUrl != null" >
        sample_pic_url = #{samplePicUrl,jdbcType=VARCHAR},
      </if>
      <if test="upTaskTime != null" >
        up_task_time = #{upTaskTime,jdbcType=VARCHAR},
      </if>
      <if test="upMonitorTaskTime != null" >
        up_monitor_task_time = #{upMonitorTaskTime,jdbcType=VARCHAR},
      </if>
      <if test="durationMonitorTaskTime != null" >
        duration_monitor_task_time = #{durationMonitorTaskTime,jdbcType=VARCHAR},
      </if>
      <if test="downMonitorTaskTime != null" >
        down_monitor_task_time = #{downMonitorTaskTime,jdbcType=VARCHAR},
      </if>
      <if test="zhuijiaMonitorTaskTime != null" >
        zhuijia_monitor_task_time = #{zhuijiaMonitorTaskTime,jdbcType=VARCHAR},
      </if>
      <if test="upTaskPoint != null" >
        up_task_point = #{upTaskPoint,jdbcType=INTEGER},
      </if>
      <if test="upMonitorTaskPoint != null" >
        up_monitor_task_point = #{upMonitorTaskPoint,jdbcType=INTEGER},
      </if>
      <if test="durationMonitorTaskPoint != null" >
        duration_monitor_task_point = #{durationMonitorTaskPoint,jdbcType=INTEGER},
      </if>
      <if test="downMonitorTaskPoint != null" >
        down_monitor_task_point = #{downMonitorTaskPoint,jdbcType=INTEGER},
      </if>
      <if test="zhuijiaMonitorTaskPoint != null" >
        zhuijia_monitor_task_point = #{zhuijiaMonitorTaskPoint,jdbcType=INTEGER},
      </if>
      <if test="upTaskMoney != null" >
        up_task_money = #{upTaskMoney,jdbcType=DOUBLE},
      </if>
      <if test="upMonitorTaskMoney != null" >
        up_monitor_task_money = #{upMonitorTaskMoney,jdbcType=DOUBLE},
      </if>
      <if test="durationMonitorTaskMoney != null" >
        duration_monitor_task_money = #{durationMonitorTaskMoney,jdbcType=DOUBLE},
      </if>
      <if test="downMonitorTaskMoney != null" >
        down_monitor_task_money = #{downMonitorTaskMoney,jdbcType=DOUBLE},
      </if>
      <if test="zhuijiaMonitorTaskMoney != null" >
        zhuijia_monitor_task_money = #{zhuikjiaMonitorTaskMoney,jdbcType=DOUBLE}
      </if>
       <if test="qualifiedPicUrl != null" >
        qualified_pic_url = #{qualifiedPicUrl,jdbcType=VARCHAR},
      </if>
      <if test="noQualifiedPicUrl1 != null" >
        no_qualified_pic_url1 = #{noQualifiedPicUrl1,jdbcType=VARCHAR},
      </if>
      <if test="noQualifiedPicUrl2 != null" >
        no_qualified_pic_url2 = #{noQualifiedPicUrl2,jdbcType=VARCHAR},
      </if>
      <if test="noQualifiedPicUrl3 != null" >
        no_qualified_pic_url3 = #{noQualifiedPicUrl3,jdbcType=VARCHAR},
      </if>
      <if test="noQualifiedText1 != null" >
        no_qualified_text1 = #{noQualifiedText1,jdbcType=VARCHAR},
      </if>
      <if test="noQualifiedText2 != null" >
        no_qualified_text2 = #{noQualifiedText2,jdbcType=VARCHAR},
      </if>
      <if test="noQualifiedText3 != null" >
        no_qualified_text3 = #{noQualifiedText3,jdbcType=VARCHAR},
      </if>
        <if test="notification != null" >
        notification = #{notification,jdbcType=VARCHAR}
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.bt.om.entity.AdActivity" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jan 18 14:25:00 CST 2018.
    -->
    update ad_activity
    set activity_name = #{activityName,jdbcType=VARCHAR},
      start_time = #{startTime,jdbcType=TIMESTAMP},
      end_time = #{endTime,jdbcType=TIMESTAMP},
      status = #{status,jdbcType=INTEGER},
      user_id = #{userId,jdbcType=INTEGER},
	  customer_type_id = #{customerTypeId,jdbcType=INTEGER},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      update_time = #{updateTime,jdbcType=TIMESTAMP},
      assessor_id = #{assessorId,jdbcType=INTEGER},
      sample_pic_url = #{samplePicUrl,jdbcType=VARCHAR},
      up_task_time = #{upTaskTime,jdbcType=VARCHAR},
      up_monitor_task_time = #{upMonitorTaskTime,jdbcType=VARCHAR},
      duration_monitor_task_time = #{durationMonitorTaskTime,jdbcType=VARCHAR},
      down_monitor_task_time = #{downMonitorTaskTime,jdbcType=VARCHAR},
      zhuijia_monitor_task_time = #{zhuijiaMonitorTaskTime,jdbcType=VARCHAR},
      up_task_point = #{upTaskPoint,jdbcType=INTEGER},
      up_monitor_task_point = #{upMonitorTaskPoint,jdbcType=INTEGER},
      duration_monitor_task_point = #{durationMonitorTaskPoint,jdbcType=INTEGER},
      down_monitor_task_point = #{downMonitorTaskPoint,jdbcType=INTEGER},
      zhuijia_monitor_task_point = #{zhuijiaMonitorTaskPoint,jdbcType=INTEGER},
      up_task_money = #{upTaskMoney,jdbcType=DOUBLE},
      up_monitor_task_money = #{upMonitorTaskMoney,jdbcType=DOUBLE},
      duration_monitor_task_money = #{durationMonitorTaskMoney,jdbcType=DOUBLE},
      down_monitor_task_money = #{downMonitorTaskMoney,jdbcType=DOUBLE},
      zhuijia_monitor_task_money = #{zhuijiaMonitorTaskMoney,jdbcType=DOUBLE},
      qualified_pic_url = #{qualifiedPicUrl,jdbcType=VARCHAR},
      no_qualified_pic_url1 = #{noQualifiedPicUrl1,jdbcType=VARCHAR},
      no_qualified_pic_url2 = #{noQualifiedPicUrl2,jdbcType=VARCHAR},
      no_qualified_pic_url3 = #{noQualifiedPicUrl3,jdbcType=VARCHAR},
      no_qualified_text1 = #{noQualifiedText1,jdbcType=VARCHAR},
      no_qualified_text2 = #{noQualifiedText2,jdbcType=VARCHAR},
      no_qualified_text3 = #{noQualifiedText3,jdbcType=VARCHAR},
      notification = #{notification,jdbcType=VARCHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>

  <resultMap id="ExtResultMap" extends="BaseResultMap" type="com.bt.om.entity.vo.AdActivityVo">
    <!--<result column="name" jdbcType="INTEGER" property="name" />-->
    <!--<result column="telephone" jdbcType="INTEGER" property="telephone" />-->
    <!--<result column="role_name" jdbcType="INTEGER" property="roleName" />-->
    <!--<collection property="activityAreas" column="id" javaType="list" select="com.bt.om.mapper.AdActivityAreaMapper.selectByActivityId"></collection>-->
    <!--<collection property="activitySeats" column="id" select="com.bt.om.mapper.AdActivityAdseatMapper.selectByActivityId"></collection>-->
    <!--<collection property="activityMedias" column="id" select="com.bt.om.mapper.AdActivityMediaMapper.selectByActivityId"></collection>-->
  </resultMap>
  
  <resultMap id="ExtResultMap2" extends="BaseResultMap" type="com.bt.om.entity.vo.AdActivityVo2">
    <result column="realname" jdbcType="VARCHAR" property="realName" />
    <result column="customerName" jdbcType="VARCHAR" property="customerName" />
    <result column="media_type_parent_id" jdbcType="INTEGER" property="mediaTypeParentId"/>
    <result column="media_type_id" jdbcType="INTEGER" property="mediaTypeId"/>
    <result column="province" jdbcType="BIGINT" property="province"/>
    <result column="city" jdbcType="BIGINT" property="city"/>
    <result column="parentName" jdbcType="VARCHAR" property="parentName"/>
	<result column="secondName" jdbcType="VARCHAR" property="secondName"/>
  </resultMap>

  <!-- 撤销活动, 功能已废弃 -->
  <update id="cancelActivityByAssessorId" parameterType="java.lang.Integer">
  		update ad_activity set assessor_id = null 
  		where status = 1 and id = #{id,jdbcType=INTEGER}
  </update>

  <!-- 后台查询活动信息 分页 -->
  <select id="getPageCount" parameterType="map" resultType="int">
    select
    count(a.id)
    from
    ad_activity a 
    	left join sys_user b on a.assessor_id = b.id
    	left join sys_user c on a.user_id = c.id
    where 1=1
    <if test="userId != null" >
      and a.user_id = #{userId,jdbcType=INTEGER}
    </if>
    <if test="activityName != null">
      and a.activity_name like #{activityName,jdbcType=VARCHAR}
    </if>
    <if test="activityId != null" >
      and a.id = #{activityId,jdbcType=INTEGER}
    </if>
    <if test="status != null" >
      and a.status = #{status,jdbcType=INTEGER}
    </if>
    <if test="startDate != null" >
      and a.start_time >= DATE_FORMAT(#{startDate,jdbcType=TIMESTAMP},'%Y-%m-%d')
    </if>
    <if test="endDate != null" >
      and a.end_time &lt;= DATE_FORMAT(#{endDate,jdbcType=TIMESTAMP},'%Y-%m-%d')
    </if>
    <if test="assessorId != null" >
      and a.assessor_id = #{assessorId,jdbcType=INTEGER}
    </if>
    <if test="samplePicUrl != null" >
      and a.sample_pic_url = #{samplePicUrl,jdbcType=VARCHAR}
    </if>
    <if test="customerIds != null">
      and a.user_id in
        <foreach collection="customerIds" separator="," open="(" close=")" item="id">#{id,jdbcType=INTEGER}</foreach>
    </if>
  </select>

  <!-- 后台查询活动信息 分页 -->
  <select id="getPageData" parameterType="map" resultMap="ExtResultMap2">
    select
    	a.id, a.activity_name, a.start_time, a.end_time, a.status, a.user_id, a.create_time, a.update_time, a.assessor_id,
    	b.realname,
    	c.realname customerName
    from
    	ad_activity a 
    	left join sys_user b on a.assessor_id = b.id
    	left join sys_user c on a.user_id = c.id
    where 1=1
    <if test="userId != null" >
      and a.user_id = #{userId,jdbcType=INTEGER}
    </if>
    <if test="activityName != null">
      and a.activity_name like #{activityName,jdbcType=VARCHAR}
    </if>
    <if test="activityId != null" >
      and a.id = #{activityId,jdbcType=INTEGER}
    </if>
    <if test="status != null" >
      and a.status = #{status,jdbcType=INTEGER}
    </if>
    <if test="startDate != null" >
      and a.start_time >= DATE_FORMAT(#{startDate,jdbcType=TIMESTAMP},'%Y-%m-%d')
    </if>
    <if test="endDate != null" >
      and a.end_time &lt;= DATE_FORMAT(#{endDate,jdbcType=TIMESTAMP},'%Y-%m-%d')
    </if>
    <if test="assessorId != null" >
      and a.assessor_id = #{assessorId,jdbcType=INTEGER}
    </if>
    <if test="customerIds != null">
      and a.user_id in
        <foreach collection="customerIds" separator="," open="(" close=")" item="id">#{id,jdbcType=INTEGER}</foreach>
    </if>
    order by a.id desc
  </select>

  <!-- 通过活动id查询活动的基础信息 -->
  <select id="selectVoByPrimaryKey" resultMap="ExtResultMap" parameterType="java.lang.Integer" >
    select
    <include refid="Base_Column_List" />
    from ad_activity
    where id = #{id,jdbcType=INTEGER}
  </select>

  <!-- 通过广告主id查询活动信息 -->
  <select id="selectByMap" resultMap="BaseResultMap" parameterType="map" >
    select
    <include refid="Base_Column_List" />
    from ad_activity
    where 1 = 1
    <if test="userId != null" >
      and user_id = #{userId,jdbcType=INTEGER}
    </if>
    order by create_time desc
  </select>

  <resultMap id="MobileReportMap" extends="BaseResultMap" type="com.bt.om.entity.vo.ActivityMobileReportVo" >
    <id column="delivery_num" property="deliveryNum" jdbcType="INTEGER" />
    <result column="monitor_num" property="monitorNum" jdbcType="INTEGER" />
    <result column="error_num" property="errorNum" jdbcType="INTEGER" />
  </resultMap>

  <select id="selectActivityReportForMobile" resultMap="MobileReportMap">
    select
    <include refid="Base_Column_List" />,
    (select count(id) from ad_activity_adseat where activity_id = a.id) as delivery_num,
    (select count(id) from ad_monitor_task where activity_id = a.id and status = 2) as monitor_num,
    (select count(id) from ad_jiucuo_task where activity_id = a.id) as error_num
    from ad_activity a
    where user_id = #{userId,jdbcType=INTEGER}
  </select>

  <!-- 广告商查询活动简单报表信息 -->
  <select id="selectActivityReportByUserId" parameterType="map" resultMap="BaseResultMap">
  	select
  	<include refid="Base_Column_List" />
  	from ad_activity
  	where 1=1
  	<if test="userId != null" >
      and user_id = #{userId,jdbcType=INTEGER}
    </if>
   	<if test="activityName != null" >
      and activity_name like #{activityName,jdbcType=VARCHAR}
    </if>
    <if test="status != null" >
      and status = #{status,jdbcType=INTEGER}
    </if>
    <if test="activityIds != null">
      and id not in
        <foreach collection="activityIds" separator="," open="(" close=")" item="id">#{id,jdbcType=INTEGER}</foreach>
    </if>
    <if test="updateTime != null">
      and a.update_time &lt;= DATE_FORMAT(#{updateTime,jdbcType=TIMESTAMP},'%Y-%m-%d %H:%i:%s')
    </if>
  	order by create_time desc
  </select>
  
  <!-- 广告商查询活动简单报表信息 -->
  <select id="selectActivityReportByUserIdCount" parameterType="map" resultType="int">
    select
    	count(id)
    from ad_activity
    where 1=1
    <if test="userId != null" >
      and user_id = #{userId,jdbcType=INTEGER}
    </if>
    <if test="activityName != null" >
      and activity_name like #{activityName,jdbcType=VARCHAR}
    </if>
    <if test="status != null" >
      and status = #{status,jdbcType=INTEGER}
    </if>
    <if test="activityIds != null">
      and id not in
        <foreach collection="activityIds" separator="," open="(" close=")" item="id">#{id,jdbcType=INTEGER}</foreach>
    </if>
    <if test="updateTime != null">
      and a.update_time &lt;= DATE_FORMAT(#{updateTime,jdbcType=TIMESTAMP},'%Y-%m-%d %H:%i:%s')
    </if>
  </select>
  
  <!-- 查询广告主在某一时间段内的活动信息 -->
  <select id="selectActivityReportByTime1" parameterType="map" resultType="java.lang.Integer">
  	select
  		id
  	from ad_activity
  	where 1=1
  	<if test="userId != null" >
      and user_id = #{userId,jdbcType=INTEGER}
    </if>
   	<if test="startDate != null" >
      and start_time &lt; DATE_FORMAT(#{startDate,jdbcType=TIMESTAMP},'%Y-%m-%d')
      and end_time &lt; DATE_FORMAT(#{startDate,jdbcType=TIMESTAMP},'%Y-%m-%d')
    </if>
  </select>
  
  <!-- 查询广告主在某一时间段内的活动信息 -->
  <select id="selectActivityReportByTime2" parameterType="map" resultType="java.lang.Integer">
  	select
  		id
  	from ad_activity
  	where 1=1
  	<if test="userId != null" >
      and user_id = #{userId,jdbcType=INTEGER}
    </if>
	<if test="endDate != null" >
	  and start_time > DATE_FORMAT(#{endDate,jdbcType=TIMESTAMP},'%Y-%m-%d')
      and end_time > DATE_FORMAT(#{endDate,jdbcType=TIMESTAMP},'%Y-%m-%d')
    </if>
  </select>
  
  <!-- 获取当前登录员工admin获取自己曾经捞取过的活动记录 -->
  <select id="selectAllByAssessorId" parameterType="map" resultMap="BaseResultMap">
  	select
    	id, activity_name, start_time, end_time, status, user_id, create_time, update_time,assessor_id
    from
    	ad_activity
    where 1=1
    <if test="status != null" >
      and status = #{status,jdbcType=INTEGER}
    </if>
    <if test="assessorId != null" >
      and assessor_id = #{assessorId,jdbcType=INTEGER}
    </if>
    <if test="activityId != null" >
      and id = #{activityId,jdbcType=INTEGER}
    </if>
    <if test="startDate != null" >
      and start_time >= DATE_FORMAT(#{startDate,jdbcType=TIMESTAMP},'%Y-%m-%d')
    </if>
    <if test="endDate != null" >
      and end_time &lt;= DATE_FORMAT(#{endDate,jdbcType=TIMESTAMP},'%Y-%m-%d')
    </if>
    order by id desc
  </select>
  
  <!-- 获取某些广告主未被后台admin抢到的活动信息, 功能已废弃 -->
  <select id="getAtimeActivity" parameterType="map" resultMap="BaseResultMap">
  	select
    	id, activity_name, start_time, end_time, status, user_id, create_time, update_time,assessor_id
    from
    	ad_activity
    where 1=1
    <if test="status != null" >
      and status = #{status,jdbcType=INTEGER}
    </if>
      and assessor_id is null
    <if test="customerIds != null">
      and user_id in
        <foreach collection="customerIds" separator="," open="(" close=")" item="id">#{id,jdbcType=INTEGER}</foreach>
    </if>
    order by id desc limit 0,2 for update;
  </select>
  
  <!-- 获取所有未确定状态的活动 -->
   <select id="getAllByStatusUncertain" parameterType="map" resultMap="BaseResultMap">
  		select
    	<include refid="Base_Column_List" />
    	from ad_activity
    	where  1 = 1 and status = 1
    	<if test="customerIds != null">
     		 and user_id in
        	<foreach collection="customerIds" separator="," open="(" close=")" item="id">#{id,jdbcType=INTEGER}</foreach>
    	</if> 
  </select>
  
  <!-- 将某些广告主的活动设置给后台admin抢到的活动, 功能已废弃 -->
  <update id="updateAssessorId" parameterType="map">
  	update ad_activity
    set
      assessor_id = #{assessorId,jdbcType=INTEGER}
    where 1=1
    <if test="ids != null">
      and id in
        <foreach collection="ids" separator="," open="(" close=")" item="id">#{id,jdbcType=INTEGER}</foreach>
    </if>
  </update>

  <!-- 查询超时未确认的活动 -->
  <select id="getDeadLineAuditActivity" parameterType="java.util.Date" resultType="java.lang.Integer">
  	 select id from ad_activity
     where status = 1 
     and start_time &lt;= DATE_FORMAT(#{endDate,jdbcType=TIMESTAMP},'%Y-%m-%d %H:%i:%s')
  </select>

  <!-- 设置超时未确认的活动 -->
  <update id="deadLineAuditActivity" parameterType="java.util.Date">
  	 update ad_activity
     set status = 4
     where status = 1 
     and start_time &lt;= DATE_FORMAT(#{endDate,jdbcType=TIMESTAMP},'%Y-%m-%d %H:%i:%s')
  </update>
  
  <!-- 查询已结束的活动 -->
  <select id="getEndActivity" parameterType="java.util.Date" resultType="java.lang.Integer">
  	 select id from ad_activity
     where status = 2
     and end_time &lt;= DATE_FORMAT(#{endDate,jdbcType=TIMESTAMP},'%Y-%m-%d')
  </select>
  
  <!-- 设置已经结束的活动 -->
  <update id="updateStatusByEndTime" parameterType="java.util.Date">
  	 update ad_activity
     set status = 3
     where status = 2 
     and end_time &lt;= DATE_FORMAT(#{endDate,jdbcType=TIMESTAMP},'%Y-%m-%d')
  </update>
  
  <!-- 获取所有当前日期已经结束状态的活动创建者列表 -->
  <select id="getEndActivityList" parameterType="java.util.Date" resultType="java.lang.Integer">
  	select user_id
  	  from ad_activity
  	 where status = 3
  	   and end_time = DATE_FORMAT(#{nowDate,jdbcType=TIMESTAMP},'%Y-%m-%d')
  </select>
</mapper>